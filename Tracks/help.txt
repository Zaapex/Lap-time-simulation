import numpy as np
import math
import pandas as pd
import matplotlib.pyplot as plt

# kompleksna stevila so kul (za 2D)
df = pd.read_csv("Tracks/FSAE Germany 2012.csv", index_col=0, low_memory=False)

radij_arr = list()
dolzina_arr = list()
# ce je radij pozitiven gre levo, ce je negativen pa desno
for line in range(len(df.index)):
    if df["Turn"][line] == "Right" or "Straight":
        radij_arr.append(float("-" + str(df["R"][line])))
        dolzina_arr.append(float(df["s"][line]))
    if df["Turn"][line] == "Left":
        radij_arr.append(float(str(df["R"][line])))
        dolzina_arr.append(float(df["s"][line]))

#radij_arr = [-10, 10, -5]
#dolzina_arr = [10 * math.pi / 2, 10 * math.pi / 2, 5 * math.pi / 1]


def premik(pos, smer, radij, dolzina):
    """vrne tuple( nova_pozicija, nova_smer )"""

    # slavna formula: obseg == kot * radij
    kot = dolzina / radij

    # se ena slavna formula: e^(i phi) == sin icos neki
    rot = pow(math.e, 1j * kot)

    r1 = radij * smer * 1j
    r2 = -r1 * rot

    return pos + r1 + r2, smer * rot


# zacetna pozicija
pos = 0 + 0j

# zacetna smer
smer = 0 + 1j

pozicija_x = list()
pozicija_y = list()
pozicija_x.append(pos.real)
pozicija_y.append(pos.imag)
print(pos)
print(smer)
print()

for radij, dolzina in zip(radij_arr, dolzina_arr):
    pos, smer = premik(pos, smer, radij, dolzina)

    print(pos.real, pos.imag)
    pozicija_x.append(pos.real)
    pozicija_y.append(pos.imag)
    #print(smer)
    print()

plt.plot(pozicija_x, pozicija_y)
plt.show()